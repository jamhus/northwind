{
  "version": 5,
  "type": "Dashboard",
  "parameters": [
    {
      "key": "userRoles",
      "initialization": "Expression",
      "entityType": "User",
      "expression": "DynamicData.getCurrentRoles()",
      "description": "Current user roles as comma-separated string"
    },
    {
      "key": "supplierId",
      "initialization": "Expression",
      "entityType": "User",
      "expression": "DynamicData.getSupplierId()",
      "description": "Supplier ID for logged-in user (if any)"
    },
    {
      "key": "companyId",
      "initialization": "Expression",
      "entityType": "User",
      "expression": "DynamicData.GetCurrentCompanyId()",
      "description": "Company ID for logged-in user (if any)"
    },
    {
      "key": "employeeId",
      "initialization": "Expression",
      "entityType": "User",
      "expression": "DynamicData.GetCurrentEmployeeId()",
      "description": "Employee ID for logged-in user (if any)"
    }
  ],
  "pages": [
    {
      "key": "mainDashboard",
      "name": [
        {
          "language": "sv",
          "text": "Startsida"
        },
        {
          "language": "en",
          "text": "Main Dashboard"
        }
      ],
      "enabled": true,
      "layout": {
        "type": "vertical",
        "rows": [
          {
            "columns": [
              {
                "itemRef": "totalSalesCard"
              },
              {
                "itemRef": "totalOrdersCard"
              },
              {
                "itemRef": "totalCustomersCard"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "salesPerMonthChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "topProductsChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "latestOrdersList"
              }
            ]
          }
        ]
      },
      "pageItems": [
        {
          "key": "totalSalesCard",
          "pageItemType": "TotalSales",
          "settings": {
            "parameterKey": "totalSales",
            "title": "Total försäljning",
            "suffix": " $",
            "decimalPlaces": 1,
            "icon": "DollarSign"
          }
        },
        {
          "key": "totalOrdersCard",
          "pageItemType": "TotalOrders",
          "settings": {
            "parameterKey": "totalOrders",
            "title": "Totala ordrar",
            "icon": "Package"
          }
        },
        {
          "key": "totalCustomersCard",
          "pageItemType": "TotalCustomers",
          "settings": {
            "parameterKey": "totalCustomers",
            "title": "Kunder",
            "icon": "Users"
          }
        },
        {
          "key": "salesPerMonthChart",
          "pageItemType": "SalesPerMonth",
          "settings": {
            "parameterKey": "salesPerMonth",
            "title": "Försäljning per månad",
            "chartType": "line",
            "color": "blue"
          }
        },
        {
          "key": "topProductsChart",
          "pageItemType": "TopProducts",
          "settings": {
            "parameterKey": "topProducts",
            "title": "Topp 5 produkter",
            "chartType": "bar",
            "color": "green",
            "take": 5
          }
        },
        {
          "key": "latestOrdersList",
          "pageItemType": "LatestOrders",
          "settings": {
            "parameterKey": "latestOrders",
            "title": "Senaste ordrar",
            "take": 5
          }
        }
      ]
    },
    {
      "key": "managementDashboard",
      "name": [
        {
          "language": "sv",
          "text": "Ledning"
        },
        {
          "language": "en",
          "text": "Management"
        }
      ],
      "enabled": true,
      "layout": {
        "type": "vertical",
        "rows": [
          {
            "columns": [
              {
                "itemRef": "avgOrderProcessingTimeCard"
              }
            ],
            "style": {
              "width": "50%"
            }
          },
          {
            "columns": [
              {
                "itemRef": "salesPerRegionChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "topEmployeesChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "topCustomersChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "supplierTotalSalesChart"
              }
            ]
          }
        ]
      },
      "pageItems": [
        {
          "key": "salesPerRegionChart",
          "pageItemType": "SalesPerRegion",
          "settings": {
            "parameterKey": "salesPerRegion",
            "title": "Försäljning per region",
            "chartType": "pie"
          }
        },
        {
          "key": "topEmployeesChart",
          "pageItemType": "TopEmployees",
          "settings": {
            "parameterKey": "topEmployees",
            "title": "Prestation per anställd",
            "chartType": "bar",
            "color": "orange",
            "take": 6
          }
        },
        {
          "key": "topCustomersChart",
          "pageItemType": "TopCustomers",
          "settings": {
            "parameterKey": "topCustomers",
            "title": "Top Customers",
            "chartType": "bar",
            "color": "teal",
            "take": 5
          }
        },
        {
          "key": "supplierTotalSalesChart",
          "pageItemType": "SupplierTotalSales",
          "settings": {
            "parameterKey": "supplierSales",
            "title": "Total försäljning per leverantör",
            "chartType": "bar"
          }
        },
        {
          "key": "avgOrderProcessingTimeCard",
          "pageItemType": "AvgOrderProcessingTime",
          "settings": {
            "title": "Genomsnittlig ordertid (dagar)"
          }
        }
      ],
      "condition": {
        "logic": "Or",
        "conditions": [
          {
            "operator": "Contains",
            "leftSource": "Parameter",
            "leftField": "userRoles",
            "rightSource": "Const",
            "rightValue": "Manager"
          },
          {
            "operator": "Contains",
            "leftSource": "Parameter",
            "leftField": "userRoles",
            "rightSource": "Const",
            "rightValue": "Admin"
          }
        ]
      }
    },
    {
      "key": "supplierDashboard",
      "name": [
        {
          "language": "sv",
          "text": "Leverantör"
        },
        {
          "language": "en",
          "text": "Supplier"
        }
      ],
      "enabled": true,
      "layout": {
        "type": "vertical",
        "rows": [
          {
            "columns": [
              {
                "itemRef": "supplierTotalSalesCard"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "productLifecycleChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "latestOrdersList"
              }
            ]
          }
        ]
      },
      "pageItems": [
        {
          "key": "supplierTotalSalesCard",
          "pageItemType": "SupplierTotalSales",
          "settings": {
            "parameterKey": "totalSales",
            "title": "Min försäljning"
          }
        },
        {
          "key": "productLifecycleChart",
          "pageItemType": "ProductLifecycle",
          "settings": {
            "parameterKey": "productLifecycle",
            "title": "Produktlivscykel",
            "chartType": "line",
            "take": 20
          }
        },
        {
          "key": "latestOrdersList",
          "pageItemType": "LatestOrders",
          "settings": {
            "parameterKey": "latestOrders",
            "title": "Senaste ordrar",
            "maxItems": 5
          }
        }
      ],
      "condition": {
        "logic": "Or",
        "conditions": [
          {
            "operator": "Contains",
            "leftSource": "Parameter",
            "leftField": "userRoles",
            "rightSource": "Const",
            "rightValue": "Supplier"
          },
          {
            "operator": "Contains",
            "leftSource": "Parameter",
            "leftField": "userRoles",
            "rightSource": "Const",
            "rightValue": "Admin"
          }
        ]
      }
    },
    {
      "key": "teamPerformance",
      "name": [
        {
          "language": "sv",
          "text": "Teamresultat"
        },
        {
          "language": "en",
          "text": "Team Performance"
        }
      ],
      "enabled": true,
      "layout": {
        "type": "vertical",
        "rows": [
          {
            "columns": [
              {
                "itemRef": "topEmployeesChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "employeeEfficiencyChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "employeeWorkloadChart"
              }
            ]
          }
        ]
      },
      "pageItems": [
        {
          "key": "topEmployeesChart",
          "pageItemType": "TopEmployees",
          "settings": {
            "title": "Bästa anställda",
            "chartType": "bar"
          },
          "condition": {
            "logic": "Or",
            "conditions": [
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Manager"
              },
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Admin"
              }
            ]
          }
        },
        {
          "key": "employeeEfficiencyChart",
          "pageItemType": "EmployeeEfficiency",
          "settings": {
            "title": "Effektivitet per anställd"
          }
        },
        {
          "key": "employeeWorkloadChart",
          "pageItemType": "EmployeeWorkload",
          "settings": {
            "title": "Belastning per anställd"
          }
        }
      ],
      "condition": {
        "logic": "Or",
        "conditions": [
          {
            "operator": "Nin",
            "leftSource": "Parameter",
            "leftField": "userRoles",
            "rightSource": "Const",
            "rightValue": "Supplier"
          }
        ]
      }
    },
    {
      "key": "analysisForecast",
      "name": [
        {
          "language": "sv",
          "text": "Analys & Prognos"
        },
        {
          "language": "en",
          "text": "Analysis & Forecast"
        }
      ],
      "enabled": true,
      "layout": {
        "type": "vertical",
        "rows": [
          {
            "columns": [
              {
                "itemRef": "discountImpactChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "discountEfficiencyChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "discountByCategoryChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "salesForecastChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "outlierProductsChart"
              }
            ]
          }
        ]
      },
      "pageItems": [
        {
          "key": "discountImpactChart",
          "pageItemType": "DiscountImpact",
          "settings": {
            "title": "Rabatteffekt",
            "chartType": "bar"
          }
        },
        {
          "key": "discountEfficiencyChart",
          "pageItemType": "DiscountEfficiency",
          "settings": {
            "title": "Genomsnittlig orderintäkt per rabattnivå",
            "chartType": "bar"
          }
        },
        {
          "key": "discountByCategoryChart",
          "pageItemType": "DiscountByCategory",
          "settings": {
            "title": "Genomsnittlig kategoriförsäljning per rabattnivå",
            "chartType": "bar"
          }
        },
        {
          "key": "salesForecastChart",
          "pageItemType": "SalesForecast",
          "settings": {
            "title": "Försäljningsprognos",
            "chartType": "line"
          }
        },
        {
          "key": "outlierProductsChart",
          "pageItemType": "OutlierProducts",
          "settings": {
            "title": "Avvikande produkter",
            "chartType": "bar"
          }
        }
      ],
      "condition": {
        "logic": "Or",
        "conditions": [
          {
            "operator": "Contains",
            "leftSource": "Parameter",
            "leftField": "userRoles",
            "rightSource": "Const",
            "rightValue": "Manager"
          },
          {
            "operator": "Contains",
            "leftSource": "Parameter",
            "leftField": "userRoles",
            "rightSource": "Const",
            "rightValue": "Admin"
          }
        ]
      }
    }
  ]
}