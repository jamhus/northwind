{
  "version": 4,
  "type": "Dashboard",
  "parameters": [
    {
      "key": "userRoles",
      "initialization": "Expression",
      "entityType": "User",
      "expression": "DynamicData.getCurrentRoles()",
      "description": "Current user roles as comma-separated string"
    },
    {
      "key": "totalSales",
      "initialization": "Handler",
      "entityType": "Order",
      "expression": "Handler.TotalSales()"
    },
    {
      "key": "totalOrders",
      "initialization": "Handler",
      "entityType": "Order",
      "expression": "Handler.TotalOrders()"
    },
    {
      "key": "totalCustomers",
      "initialization": "Handler",
      "entityType": "Customer",
      "expression": "Handler.TotalCustomers()"
    },
    {
      "key": "salesPerMonth",
      "initialization": "Handler",
      "entityType": "Order",
      "expression": "Handler.SalesPerMonth()"
    },
    {
      "key": "salesPerRegion",
      "initialization": "Handler",
      "entityType": "Order",
      "expression": "Handler.SalesPerRegion()"
    },
    {
      "key": "topProducts",
      "initialization": "Handler",
      "entityType": "Product",
      "expression": "Handler.TopProducts(5)"
    },
    {
      "key": "topEmployees",
      "initialization": "Handler",
      "entityType": "Employee",
      "expression": "Handler.TopEmployees(6)"
    },
    {
      "key": "topCustomers",
      "initialization": "Handler",
      "entityType": "Customer",
      "expression": "Handler.TopCustomers(5)"
    },
    {
      "key": "latestOrders",
      "initialization": "Handler",
      "entityType": "Order",
      "expression": "Handler.LatestOrders(5)"
    }
  ],
  "pages": [
    {
      "key": "mainDashboard",
      "name": [
        {
          "language": "sv",
          "text": "Orderöversikt"
        },
        {
          "language": "en",
          "text": "Order Overview"
        }
      ],
      "enabled": true,
      "layout": {
        "type": "vertical",
        "rows": [
          {
            "columns": [
              {
                "itemRef": "totalSalesCard"
              },
              {
                "itemRef": "totalOrdersCard"
              },
              {
                "itemRef": "totalCustomersCard"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "salesPerMonthChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "salesPerRegionChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "topProductsChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "topCustomersChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "topEmployeesChart"
              }
            ]
          },
          {
            "columns": [
              {
                "itemRef": "latestOrdersList"
              }
            ]
          }
        ]
      },
      "pageItems": [
        {
          "key": "totalSalesCard",
          "pageItemType": "TotalSales",
          "settings": {
            "parameterKey": "totalSales",
            "title": "Total försäljning",
            "suffix": " kr",
            "decimalPlaces": 1,
            "icon": "DollarSign"
          }
        },
        {
          "key": "totalOrdersCard",
          "pageItemType": "TotalOrders",
          "settings": {
            "parameterKey": "totalOrders",
            "title": "Totala ordrar",
            "icon": "Package"
          }
        },
        {
          "key": "totalCustomersCard",
          "pageItemType": "TotalCustomers",
          "settings": {
            "parameterKey": "totalCustomers",
            "title": "Kunder",
            "icon": "Users"
          }
        },
        {
          "key": "salesPerMonthChart",
          "pageItemType": "SalesPerMonth",
          "settings": {
            "parameterKey": "salesPerMonth",
            "title": "Försäljning per månad",
            "chartType": "line",
            "color": "blue"
          },
          "condition": {
            "logic": "Or",
            "conditions": [
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Manager"
              },
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Employee"
              },
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Admin"
              }
            ]
          }
        },
        {
          "key": "salesPerRegionChart",
          "pageItemType": "SalesPerRegion",
          "settings": {
            "parameterKey": "salesPerRegion",
            "title": "Försäljning per region",
            "chartType": "pie"
          },
          "condition": {
            "logic": "Or",
            "conditions": [
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Manager"
              },
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Admin"
              }
            ]
          }
        },
        {
          "key": "topProductsChart",
          "pageItemType": "TopProducts",
          "settings": {
            "parameterKey": "topProducts",
            "title": "Topp 5 produkter",
            "chartType": "bar",
            "color": "green"
          }
        },
        {
          "key": "topCustomersChart",
          "pageItemType": "TopCustomers",
          "settings": {
            "parameterKey": "topCustomers",
            "title": "Toppkunder",
            "chartType": "bar",
            "color": "teal"
          },
          "condition": {
            "logic": "Or",
            "conditions": [
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Manager"
              },
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Admin"
              }
            ]
          }
        },
        {
          "key": "topEmployeesChart",
          "pageItemType": "TopEmployees",
          "settings": {
            "parameterKey": "topEmployees",
            "title": "Prestation per anställd",
            "chartType": "bar",
            "color": "orange"
          },
          "condition": {
            "logic": "Or",
            "conditions": [
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Manager"
              },
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Admin"
              }
            ]
          }
        },
        {
          "key": "latestOrdersList",
          "pageItemType": "LatestOrders",
          "settings": {
            "parameterKey": "latestOrders",
            "title": "Senaste ordrar",
            "top": 10
          },
          "condition": {
            "logic": "Or",
            "conditions": [
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Employee"
              },
              {
                "operator": "Contains",
                "leftSource": "Parameter",
                "leftField": "userRoles",
                "rightSource": "Const",
                "rightValue": "Manager"
              }
            ]
          }
        }
      ]
    }
  ]
}